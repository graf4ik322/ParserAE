# Парсер каталога парфюмерии Aroma-Euro.ru

Этот проект содержит специализированный парсер для извлечения информации о парфюмерных композициях с сайта [aroma-euro.ru](https://aroma-euro.ru/perfume/).

## Описание

Парсер извлекает следующую информацию о парфюмерии:
- **Полное название** товара
- **Бренд** (фабрика-производитель)
- **Название** парфюма
- **URL** страницы товара
- **Цена** (если доступна)
- **Изображение** (если доступно)

Все данные сохраняются в формате JSON для последующей обработки через LLM или другие инструменты.

## Установка

1. Убедитесь, что у вас установлен Python 3.7 или выше:
```bash
python --version
```

2. Установите необходимые зависимости:
```bash
pip install -r requirements.txt
```

## Использование

### Основной парсер

Запустите основной парсер:
```bash
python aroma_euro_parser.py
```

Этот скрипт:
- Автоматически найдет все страницы каталога
- Извлечет информацию о всех парфюмах
- Сохранит данные в файл `aroma_euro_perfumes.json`
- Выведет подробную статистику

### Универсальный парсер

Также доступен универсальный парсер, который может работать с различными сайтами:
```bash
python perfume_parser.py
```

## Структура выходных данных

Данные сохраняются в JSON формате со следующей структурой:

```json
{
  "metadata": {
    "source": "aroma-euro.ru",
    "parsing_date": "2025-01-28 12:00:00",
    "total_count": 1500,
    "parser_version": "2.0"
  },
  "perfumes": [
    {
      "full_title": "Tom Ford - Black Orchid",
      "brand": "Tom Ford",
      "name": "Black Orchid",
      "url": "https://aroma-euro.ru/perfume/tom-ford-black-orchid/",
      "price": "450 ₽",
      "image": "https://aroma-euro.ru/images/thumbnails/100/100/detailed/10/product-example.jpg"
    }
  ]
}
```

## Особенности парсера

### Интеллектуальное разделение названий

Парсер использует несколько стратегий для разделения полного названия на бренд и название парфюма:

1. **Паттерны с разделителями**: `Tom Ford - Black Orchid`
2. **Известные бренды**: автоматическое распознавание популярных брендов
3. **Регулярные выражения**: для сложных случаев форматирования

### Обработка ошибок

- Автоматические повторные попытки при сетевых ошибках
- Подробное логирование всех операций
- Сохранение отладочной информации при проблемах

### Соблюдение этики парсинга

- Задержки между запросами (3 секунды)
- Имитация реального браузера
- Обработка ошибок HTTP

## Логирование

Парсер создает подробные логи в файле `aroma_euro_parser.log`, включающие:
- Информацию о загружаемых страницах
- Количество найденных товаров
- Ошибки и предупреждения
- Статистику парсинга

## Статистика парсинга

После завершения работы парсер выводит подробную статистику:
- Общее количество найденных парфюмов
- Количество уникальных брендов
- Процент товаров с определенными брендами
- Топ-10 самых популярных брендов

## Пример вывода

```
==================================================
СТАТИСТИКА ПАРСИНГА AROMA-EURO.RU
==================================================
Всего парфюмов: 1247
Уникальных брендов: 156
С определенным брендом: 1098
Без бренда: 149
С URL: 1247
С ценами: 1189
С изображениями: 1203

==================================================
ПРИМЕРЫ ЗАПИСЕЙ
==================================================

1. Tom Ford - Black Orchid
   Бренд: Tom Ford
   Название: Black Orchid
   Цена: 450 ₽
   URL: https://aroma-euro.ru/perfume/tom-ford-black-orchid/

2. Chanel - Coco Mademoiselle
   Бренд: Chanel
   Название: Coco Mademoiselle
   Цена: 420 ₽
   URL: https://aroma-euro.ru/perfume/chanel-coco-mademoiselle/

==================================================
ТОП-10 БРЕНДОВ
==================================================
 1. Tom Ford: 89 товаров
 2. Chanel: 67 товаров
 3. Dior: 54 товаров
 4. Creed: 43 товаров
 5. Maison Margiela: 38 товаров
```

## Дальнейшая обработка данных

Полученный JSON файл можно использовать для:

1. **Анализа с помощью LLM**: создание точных описаний композиций
2. **Создания каталогов**: импорт в базы данных или CMS
3. **Аналитики**: исследование рынка парфюмерии
4. **Мониторинга цен**: отслеживание изменений стоимости

## Требования к системе

- Python 3.7+
- Стабильное интернет-соединение
- ~50 МБ свободного места для данных и логов

## Устранение неполадок

### Проблема: Парсер не находит товары

1. Проверьте доступность сайта: `curl -I https://aroma-euro.ru/perfume/`
2. Просмотрите файл `debug_page.html` (создается автоматически)
3. Проверьте логи в файле `aroma_euro_parser.log`

### Проблема: Медленная работа

1. Увеличьте задержки между запросами в коде
2. Проверьте скорость интернет-соединения
3. Запускайте парсер в периоды низкой нагрузки на сайт

### Проблема: Ошибки кодировки

1. Убедитесь, что терминал поддерживает UTF-8
2. На Windows используйте: `chcp 65001`

## Лицензия

Этот проект предназначен только для образовательных целей. Пожалуйста, соблюдайте robots.txt сайта и не создавайте чрезмерную нагрузку на сервер.

## Контакты

При возникновении вопросов или предложений по улучшению, создайте issue в репозитории проекта.